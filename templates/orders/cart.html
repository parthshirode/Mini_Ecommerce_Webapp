{% extends 'base.html' %}

{% block title %}Your Shopping Cart{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto">
    <h1 class="text-4xl font-bold text-center text-white mb-8 tracking-wider">
        <i class="fas fa-shopping-cart text-violet-400 mr-3"></i>Your Shopping Cart
    </h1>

    {% if not cart_items %}
        <div class="glass-card rounded-xl p-12 text-center">
            <i class="fas fa-ghost text-7xl text-violet-400 opacity-50 mb-6"></i>
            <h2 class="text-3xl font-bold text-white mb-3">It's a bit empty in here.</h2>
            <p class="text-lg text-gray-300 mb-8">Looks like you haven't added any products to your cart yet.</p>
            <a href="{{ url_for('products.all_products') }}" class="mt-6 inline-block px-10 py-4 rounded-lg aurora-btn font-bold text-lg">
                <i class="fas fa-rocket mr-2"></i> Start Shopping
            </a>
        </div>
    {% else %}
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Cart Items List -->
            <div class="lg:col-span-2 glass-card rounded-xl p-6 space-y-4">
                {% for item in cart_items %}
                <div class="flex items-center justify-between p-4 bg-gray-900/50 rounded-lg">
                    <div class="flex items-center space-x-4">
                        <div class="w-20 h-20 bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0">
                            <i class="fas fa-box text-4xl text-violet-400"></i>
                        </div>
                        <div>
                            <p class="font-bold text-lg text-white">{{ item.Name }}</p>
                            <p class="text-sm text-gray-400">Unit Price: ₹{{ "%.2f"|format(item.Price) }}</p>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-6">
                        <p class="font-semibold text-lg text-white w-20 text-center">Qty: {{ item.quantity }}</p>
                        <p class="font-bold text-xl text-violet-300 w-28 text-right">₹{{ "%.2f"|format(item.subtotal) }}</p>
                        <form action="{{ url_for('orders.remove_from_cart', product_id=item.ProductID) }}" method="post" class="inline">
                            <button type="submit" class="w-10 h-10 rounded-full bg-red-800/50 hover:bg-red-700/70 text-red-300 transition-colors flex items-center justify-center" title="Remove Item">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </form>
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- Cart Summary & Checkout -->
            <div class="lg:col-span-1">
                <div class="glass-card rounded-xl p-6 sticky top-24">
                    <h2 class="text-2xl font-bold text-white border-b border-gray-700 pb-3 mb-4">Order Summary</h2>
                    <div class="space-y-3">
                        <div class="flex justify-between text-gray-300">
                            <span>Subtotal</span>
                            <span>₹{{ "%.2f"|format(total_price) }}</span>
                        </div>
                        <div class="flex justify-between text-gray-300">
                            <span>Shipping</span>
                            <span>FREE</span>
                        </div>
                    </div>
                    <div class="border-t border-gray-700 mt-4 pt-4">
                        <div class="flex justify-between items-center text-white">
                            <span class="text-xl font-bold">Total</span>
                            <span class="text-3xl font-bold text-violet-300">₹{{ "%.2f"|format(total_price) }}</span>
                        </div>
                    </div>
                    <div class="mt-6">
                        <form action="{{ url_for('orders.checkout') }}" method="post">
                            <button type="submit" class="w-full px-10 py-3 rounded-lg aurora-btn font-bold text-lg">
                                Proceed to Checkout
                            </button>
                        </form>
                         <a href="{{ url_for('products.all_products') }}" class="mt-4 text-center block text-gray-400 hover:text-violet-300 transition-colors">
                            or Continue Shopping
                        </a>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
</div>
{% endblock %}

